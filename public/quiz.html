<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BodyPedia | Quiz</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="../public/assets/imgs/header_logo.png" />
</head>

<body class="quiz-page" onload="onloadEsconder()">

    <!-- Header -->
    <div class="header">
        <div class="container">
            <div class="imagem">
                <img src="../public/assets/imgs/header_logo.png" id="logo_header" alt="Logo BodyPedia">
                <h1 class="titulo">BodyPedia</h1>
            </div>
            <ul class="navbar">
                <li><a href="index.html">Home üè†</a></li>
                <li><a href="fisiculturistas.html">Fisiculturistas üèãÔ∏è‚Äç‚ôÄÔ∏è</a></li>
                <li><a href="infoTMB.html">TMB üìä</a></li>
                <li><a href="blog.html">Blog üìñ</a></li>
            </ul>
        </div>
    </div>

    <!-- Banner -->
    <div class="banner">
        <div class="container">
            <p>Treino, mente e rotina ‚Äî uma jornada completa pelo fisiculturismo</p>
        </div>
    </div>

    <div id="pontuacaoEJogo">
        <button id="btnIniciarQuiz" onclick="iniciarQuiz()">INICIAR QUIZ</button>

        <div id="pontuacao">
            <div id="pontuacaoDuranteJogo">
                <span>Quantidade de acertos: <span id="spanCertas"></span></span>
                <span>Quantidade de erros: <span id="spanErradas"></span></span>
            </div>
            <div id="pontuacaoFinalJogo">
                <span id="pontuacaoFinal">Pontua√ß√£o Final:
                    <span id="spanPontuacaoFinal">***</span>
                </span>
                <span id="msgFinal">***</span>
            </div>
        </div>

        <div id="jogo">
            <div id="infoQuestao">
                <span>Quest√£o atual: <span id="spanNumeroDaQuestaoAtual"></span> de <span id="qtdQuestoes"></span>
                    quest√µes.</span>
            </div>

            <div id="perguntaDaQuestaoAtual">
                <span id="spanQuestaoExibida"></span>
            </div>

            <div id="infoAlternativas">
                <span><em>Escolha uma op√ß√£o dentre as abaixo:</em></span>
            </div>

            <div id="opcoes">
                <label class="option-container" id="containerOpcaoA">
                    <input type="radio" id="primeiraOpcao" name="option" class="radio" value="alternativaA" />
                    <span id="labelOpcaoUm" class="option"></span>
                </label>
                <label class="option-container" id="containerOpcaoB">
                    <input type="radio" id="segundaOpcao" name="option" class="radio" value="alternativaB" />
                    <span id="labelOpcaoDois" class="option"></span>
                </label>
                <label class="option-container" id="containerOpcaoC">
                    <input type="radio" id="terceiraOpcao" name="option" class="radio" value="alternativaC" />
                    <span id="labelOpcaoTres" class="option"></span>
                </label>
                <label class="option-container" id="containerOpcaoD">
                    <input type="radio" id="quartaOpcao" name="option" class="radio" value="alternativaD" />
                    <span id="labelOpcaoQuatro" class="option"></span>
                </label>
            </div>

            <div id="botoes">
                <button onclick="submeter()" id="btnSubmeter">Submeter resposta</button>
                <button onclick="avancar()" id="btnProx" disabled>Avan√ßar para pr√≥xima quest√£o</button>
                <button onclick="tentarNovamente()" id="btnTentarNovamente" disabled>Tentar novamente</button>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="container">
            <h4>Sergio Ingegneri ¬© 2025 SpTech 1CCOB</h4>
        </div>
    </div>

    <script>
        const listaDeQuestoes = [
            {
                pergunta: "O que √© BodyPedia?",
                alternativaA: "Uma enciclop√©dia de treinamentos",
                alternativaB: "Uma rede social fitness",
                alternativaC: "Um blog de receitas saud√°veis",
                alternativaD: "", // Op√ß√£o D vazia, pois a pergunta original tinha 3 op√ß√µes
                alternativaCorreta: "alternativaA" // !!! ATUALIZE PARA A RESPOSTA CORRETA (ex: "alternativaB") !!!
            },
            {
                pergunta: "TETSTSTTSTSTGAK?",
                alternativaA: "AFKLFASL",
                alternativaB: "FSAKMFASL",
                alternativaC: "AFBHKFASBKFSA",
                alternativaD: "",
                alternativaCorreta: "alternativaA" // !!! ATUALIZE PARA A RESPOSTA CORRETA !!!
            },
            {
                pergunta: "Qual √© o m√©todo Heavy Duty?",
                alternativaA: "Treino de alta intensidade e poucas repeti√ß√µes",
                alternativaB: "Treino de resist√™ncia cardiovascular",
                alternativaC: "Treino de alongamento",
                alternativaD: "",
                alternativaCorreta: "alternativaA" // !!! ATUALIZE PARA A RESPOSTA CORRETA !!!
            },
            {
                pergunta: "Como calcular TMB?",
                alternativaA: "F√≥rmula de Harris-Benedict",
                alternativaB: "Avalia√ß√£o f√≠sica subjetiva",
                alternativaC: "Medi√ß√£o por bioimped√¢ncia",
                alternativaD: "",
                alternativaCorreta: "alternativaA" // !!! ATUALIZE PARA A RESPOSTA CORRETA !!!
            },
            {
                pergunta: "Por que o sono √© importante para hipertrofia?",
                alternativaA: "Recupera√ß√£o hormonal e muscular",
                alternativaB: "Melhora da digest√£o",
                alternativaC: "Aumento da resist√™ncia cardiovascular",
                alternativaD: "",
                alternativaCorreta: "alternativaA" // !!! ATUALIZE PARA A RESPOSTA CORRETA !!!
            }
        ];

        // Vari√°veis globais    
        let numeroDaQuestaoAtual = 0;
        let pontuacaoFinal = 0;
        // let tentativaIncorreta = 0; // Esta vari√°vel n√£o √© cr√≠tica para a pontua√ß√£o final no script atual
        let certas = 0;
        let erradas = 0;
        let quantidadeDeQuestoes = listaDeQuestoes.length;

        function onloadEsconder() {
            document.getElementById('pontuacao').style.display = "none";
            document.getElementById('jogo').style.display = "none";
            document.getElementById('pontuacaoFinalJogo').style.display = "none";
        }

        function iniciarQuiz() {
            document.getElementById('pontuacao').style.display = "block"; // Ou "flex" se for estilizado com flex
            document.getElementById('pontuacaoDuranteJogo').style.display = "block"; // Ou "flex"
            document.getElementById('pontuacaoFinalJogo').style.display = "none";
            document.getElementById('jogo').style.display = "flex"; // Usar flex para #jogo por causa do flex-direction: column
            document.getElementById('btnIniciarQuiz').style.display = "none";

            // Resetar contadores para caso o usu√°rio tente novamente sem recarregar a p√°gina (se essa funcionalidade for adicionada)
            numeroDaQuestaoAtual = 0;
            pontuacaoFinal = 0;
            certas = 0;
            erradas = 0;

            document.getElementById('qtdQuestoes').innerHTML = quantidadeDeQuestoes;
            document.getElementById('spanCertas').innerHTML = certas;
            document.getElementById('spanErradas').innerHTML = erradas;
            document.getElementById('spanPontuacaoFinal').innerHTML = "***";
            document.getElementById('msgFinal').innerHTML = "***";
            // Limpar classes de cor da msgFinal se tentar novamente
            document.getElementById('msgFinal').classList.remove("text-success-with-bg", "text-danger-with-bg", "text-warning-with-bg");


            preencherHTMLcomQuestaoAtual(0);

            document.getElementById('btnSubmeter').disabled = false;
            document.getElementById('btnProx').disabled = true;
            document.getElementById('btnProx').innerHTML = "Avan√ßar para pr√≥xima quest√£o";
            document.getElementById('btnTentarNovamente').disabled = false;
        }

        function preencherHTMLcomQuestaoAtual(index) {
            habilitarAlternativas(true);
            const questaoAtual = listaDeQuestoes[index];
            // numeroDaQuestaoAtual = index; // J√° atualizado em checarResposta ou iniciarQuiz

            document.getElementById("spanNumeroDaQuestaoAtual").innerHTML = Number(index) + 1;
            document.getElementById("spanQuestaoExibida").innerHTML = questaoAtual.pergunta;
            document.getElementById("labelOpcaoUm").innerHTML = questaoAtual.alternativaA;
            document.getElementById("labelOpcaoDois").innerHTML = questaoAtual.alternativaB;
            document.getElementById("labelOpcaoTres").innerHTML = questaoAtual.alternativaC;

            const labelOpcaoQuatro = document.getElementById("labelOpcaoQuatro");
            const containerOpcaoD = document.getElementById("containerOpcaoD");

            if (questaoAtual.alternativaD && questaoAtual.alternativaD.trim() !== "") {
                labelOpcaoQuatro.innerHTML = questaoAtual.alternativaD;
                containerOpcaoD.style.display = "flex"; // Ou o display original do .option-container
            } else {
                labelOpcaoQuatro.innerHTML = "";
                containerOpcaoD.style.display = "none";
            }
        }

        function submeter() {
            const options = document.getElementsByName("option");
            let hasChecked = false;
            for (let i = 0; i < options.length; i++) {
                if (options[i].checked) {
                    hasChecked = true;
                    break;
                }
            }

            if (!hasChecked) {
                alert("Escolha uma op√ß√£o para submeter.");
            } else {
                document.getElementById('btnSubmeter').disabled = true;
                document.getElementById('btnProx').disabled = false;
                habilitarAlternativas(false);
                checarResposta();
            }
        }

        function habilitarAlternativas(habilitar) {
            const inputs = ["primeiraOpcao", "segundaOpcao", "terceiraOpcao", "quartaOpcao"];
            inputs.forEach(id => {
                document.getElementById(id).disabled = !habilitar;
            });
        }

        function avancar() {
            document.getElementById('btnProx').disabled = true;
            document.getElementById('btnSubmeter').disabled = false;

            desmarcarRadioButtons();
            limparCoresBackgroundOpcoes();

            if (numeroDaQuestaoAtual < quantidadeDeQuestoes) {
                preencherHTMLcomQuestaoAtual(numeroDaQuestaoAtual);
                if (numeroDaQuestaoAtual === quantidadeDeQuestoes - 1 && quantidadeDeQuestoes > 1) { // Se for a √∫ltima quest√£o a ser exibida
                    document.getElementById('btnProx').innerHTML = "Ver Resultado";
                } else if (quantidadeDeQuestoes === 1) { // Se s√≥ tiver 1 quest√£o no total
                    document.getElementById('btnProx').innerHTML = "Ver Resultado";
                }

            } else {
                finalizarJogo();
            }
        }

        function tentarNovamente() {
            // Em vez de reload, chama iniciarQuiz para um reset mais suave se preferir
            iniciarQuiz();
            // window.location.reload(); // Ou usar reload para reset completo
        }

        function checarResposta() {
            const questaoAtual = listaDeQuestoes[numeroDaQuestaoAtual];
            const respostaDefinida = questaoAtual.alternativaCorreta;
            const options = document.getElementsByName("option");
            let idContainerCorreto = null;

            options.forEach((optionInput) => {
                if (optionInput.value === respostaDefinida) {
                    if (optionInput.labels && optionInput.labels.length > 0) {
                        idContainerCorreto = optionInput.labels[0].id;
                    }
                }
            });

            options.forEach((optionInput) => {
                if (optionInput.checked) {
                    const idContainerUsuario = (optionInput.labels && optionInput.labels.length > 0) ? optionInput.labels[0].id : null;
                    if (optionInput.value === respostaDefinida) {
                        if (idContainerUsuario) document.getElementById(idContainerUsuario).classList.add("text-success-with-bg");
                        pontuacaoFinal++;
                        certas++;
                        document.getElementById("spanCertas").innerHTML = certas;
                    } else {
                        if (idContainerUsuario) document.getElementById(idContainerUsuario).classList.add("text-danger-with-bg");
                        if (idContainerCorreto) document.getElementById(idContainerCorreto).classList.add("text-success-with-bg");
                        erradas++;
                        document.getElementById("spanErradas").innerHTML = erradas;
                    }
                }
            });
            numeroDaQuestaoAtual++;
            // Ajuste para o bot√£o "Ver Resultado" quando for a √∫ltima pergunta respondida
            if (numeroDaQuestaoAtual >= quantidadeDeQuestoes) {
                document.getElementById('btnProx').innerHTML = "Ver Resultado";
            }
        }

        function limparCoresBackgroundOpcoes() {
            const idsContainers = ["containerOpcaoA", "containerOpcaoB", "containerOpcaoC", "containerOpcaoD"];
            idsContainers.forEach(id => {
                const elem = document.getElementById(id);
                if (elem) {
                    elem.classList.remove("text-danger-with-bg", "text-success-with-bg");
                }
            });
        }

        function desmarcarRadioButtons() {
            const options = document.getElementsByName("option");
            options.forEach(option => option.checked = false);
        }

        function finalizarJogo() {
            document.getElementById('jogo').style.display = "none";
            document.getElementById('pontuacaoDuranteJogo').style.display = "none";
            document.getElementById('pontuacaoFinalJogo').style.display = "block"; // Ou "flex"

            let textoMsg;
            let classeCorMsg;
            const porcentagem = (quantidadeDeQuestoes > 0) ? (pontuacaoFinal / quantidadeDeQuestoes) : 0;

            if (porcentagem <= 0.3) {
                textoMsg = "Parece que voc√™ n√£o estudou...";
                classeCorMsg = "text-danger-with-bg";
            } else if (porcentagem <= 0.8) {
                textoMsg = "Pode melhorar na pr√≥xima, hein!";
                classeCorMsg = "text-warning-with-bg";
            } else {
                textoMsg = "Uau, parab√©ns!";
                classeCorMsg = "text-success-with-bg";
            }
            textoMsg += "<br> Voc√™ acertou " + Math.round(porcentagem * 100) + "% das quest√µes.";

            const msgFinalEl = document.getElementById('msgFinal');
            msgFinalEl.innerHTML = textoMsg;
            msgFinalEl.className = 'msgFinal'; // Resetar classes antes de adicionar a nova
            msgFinalEl.classList.add(classeCorMsg);

            document.getElementById('spanPontuacaoFinal').innerHTML = pontuacaoFinal + " de " + quantidadeDeQuestoes;

            document.getElementById('btnProx').disabled = true;
            document.getElementById('btnSubmeter').disabled = true;
            document.getElementById('btnTentarNovamente').disabled = true;
        }
    </script>
</body>

</html>